{% extends "admin/layout.twig" %}
{% import "macros.twig" as macros %}

{% block title %}Schedules &ndash; Admin{% endblock %}

{% block content %}
<h2>Schedules</h2>

<table class="table table-striped table-hover">
	<thead>
		<tr>
			<th>ID</th>
			<th>Name</th>
			<th>Slug</th>
			<th>Items</th>
			<th>Event</th>
			<th>Owner</th>
			<th>Last Updated</th>
		</tr>
	</thead>

	<tbody>
		{% for schedule in schedules %}
		<tr>
			{% set event = schedule.event %}
			<td>{{ schedule.id }}</td>
			<td><a href="/-/admin/schedules/{{ schedule.id }}/edit">{{ schedule.name|shorten(30) }}</a></td>
			<td><a href="/{{ event.slug }}/{{ schedule.slug }}" target="_blank"><code>{{ schedule.slug|shorten(20) }}</code></a></td>
			<td class="text-right">{{ schedule.itemCount }}</td>
			<td><a href="/-/admin/events/{{ event.id }}/edit">{{ event.name|shorten(30) }}</a></td>
			<td><a href="/-/admin/users/{{ event.user.id }}/edit">{{ utils.roleIcon(event.user.role)|raw}} {{ event.user.name|shorten(30) }}</a></td>
			<td class="text-right">{{ macros.backend_date(schedule.updatedAt) }}</td>
		</tr>
		{% endfor %}
	</tbody>
</table>

{{ macros.render_pager(pager, '/-/admin/schedules') }}
{% endblock %}
